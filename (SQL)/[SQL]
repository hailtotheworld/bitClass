-- 데뷔일자

drop procedure if exists ifT;

delimiter $$
create procedure ifT()
begin
	declare days int;
    declare today date;
    declare debutDate date;
    
    set today = current_date();
    select debut_date into debutDate from member where mem_id='GRL';
    set days = datediff(today, debutDate);
    
	if(days/365>5) then
    select concat('5년 이상이네요. 데뷔한지',days,'지났습니다.');
	elseif(days/365<5) then
    select concat('5년미만이네요. 데뷔한지',days,'지났습니다.');
    end if;
    
end $$
delimiter ;

call ifT();





































drop procedure if exists while1;
delimiter $$
create procedure while1()
begin
	declare i int;
    declare sum int;
   
	set i=1;
    set sum=0;
    
    while(i<=100) do
    set sum = sum+i;
    set i = i+1;
    end while;
    select sum;
end $$
delimiter ;

call while1();













drop procedure if exists while2;
delimiter $$
create procedure while2()
begin
	declare i int;
    declare sum int;
    
    set i=1;
    set sum=0;
    
    myWhile:
    while(i<=100) do
    if(i%4=0) then
    set i=i+1;
    iterate myWhile;
	end if;
    
    set sum=sum+i;
    set i=i+1;
    
    if(sum>1000) then
    leave myWhile;
    end if;
    end while;
    select sum;
end $$
delimiter ;
call while2();


set @name = 'BLK';
prepare myQ from 'select * from member where mem_id=?';
execute myQ using @name;
deallocate prepare myQ;



























set @name = 'BLK';
prepare myQ from 'select * from member where mem_id=?';
execute myQ using @name;
deallocate prepare myQ;

drop table if exists gate;
create table gate (number int auto_increment primary key, entrytime timestamp);

set @entrytimeD = CURRENT_TIMESTAMP();
prepare myQ from 'insert into gate values(null,?)';
execute myQ using @entrytimeD;

select * from gate;



select 1+'7' from dual;
select 1||7 from dual;

select * from member;

select * from member where REGEXP_LIKE(mem_id,'01[016-9]-\d{3,4}-\d{4}');























drop table if exists gate;
create table gate(
	num int auto_increment primary key,
    nowData datetime
);

set @time = current_timestamp();
prepare myQ from 'insert into gate values(null, ?)';
execute myQ using @time;
deallocate prepare myQ;
select * from gate;

create table testTT(
	name varchar(2)
);

insert into testTT values('한글자');

select * from testTT;

drop table testTT;


select * from member;

drop view if exists mem_v;
create view  mem_v
as
	select mem_id '멤버 아이디', mem_name  from member;

select `멤버 아이디`, mem_name from mem_v;

show create view mem_v;





